<?php
/* Author ‚Äî Me Kriz
   Website ‚Äî vk.com/m.kriz & github.com/Mekriz
   VKBot ‚Äî VK API 1.131
   Created ‚Äî 5:12 AM 22.05.2022

   ‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
   ‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïë‚ñë‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë
   ‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïê‚ïù‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ñà‚ïî‚ïê‚ïù
   ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñë‚ñë  ‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñë‚ñë
   ‚ñà‚ñà‚ïë‚ñë‚ïö‚ïê‚ïù‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
   ‚ïö‚ïê‚ïù‚ñë‚ñë‚ñë‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
*/

class Hello{
    
    public function __construct(){
    }
    public function onMessage($command, $user, $utils){
        require_once("utils/Config.php");
        require_once("src/Keyboard.php");
        $cmd = $command->getName();
        $args = $command->getArgs();
        $fname = $user->getFirstName();
        $id = $user->getID();
        //–ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ñ–∏–≥–æ–º
        $this->test = new Config("test.json", Config::JSON);
        if(!$this->test->exists($id)){
            $this->test->set($id, 0);
            $this->test->save();
        }
        //–ø—Ä–∏–º–µ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–º–∞–Ω–¥
        if($cmd == "/–∫–ª–∞–≤–∞"){
            $kb = new keyboard(true);
            $kb->addTextButton("üçè —è–±–ª–æ–∫–æ", "positive");
            $kb->addTextButton("üçé —è–±–ª–æ–∫–æ", "negative");
            $kb->addLine();
            $kb->addTextButton("–í—ã–±–∏—Ä–∞–π");
            $user->sendKeyboard("–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞", $kb->getAll());
        }
        if($cmd == "/–ø—Ä–∏–≤–µ—Ç"){
            if(isset($command->getAttachments()[0])){
                //–≤ —Å–ª—É—á–∞–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –µ–≥–æ
                $user->sendMessage("–ó–¥—Ä–∞—Å—Ç–≤—É–π, ". $user->getFirstName(), $command->getAttachments()[0]);
            }else{
                $user->sendMessage("–ó–¥—Ä–∞—Å—Ç–≤—É–π, ". $user->getFirstName());
            }
            
            if($args[0] == "–º–æ—Ä—è–∫"){
                $user->sendMessage("–û—Ç–¥–∞—Ç—å —à–≤–æ—Ä—Ç–æ–≤—ã–π!");
            }
        }
    }
    
}
